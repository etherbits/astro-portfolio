---
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"svg"> {
  type: "homeRight" | "homeLeft";
  fgDelay?: number;
}

const { props } = Astro;
---

<div wave-canvas-container wave-type={props.type} fg-delay={props.fgDelay || 0}>
  <canvas {...props}></canvas>
  <canvas {...props}></canvas>
</div>

<script>
  const waveLines = {
    homeRight: {
      viewBox: "0 0 1460 1068",
      lines: [
        [
          [0.6875345821325648, 0.0009699321047526673],
          [
            0.6288170028818444, 0.12075654704170707, 0.45662680115273774,
            0.13821532492725508, 0.44906195965417867, 0.28419010669253153,
          ],
          [
            0.43827809798270895, 0.4922725509214355, 0.37161239193083573,
            0.4277400581959263, 0.2930821325648415, 0.533462657613967,
          ],
          [
            0.20698703170028818, 0.6493695441319107, 0.31829827089337176,
            0.7095053346265762, 0.08919164265129684, 0.7245392822502424,
          ],
          [
            0.055449783861671466, 0.7274490785645005, -0.0092235590778098,
            0.7428709990300679, 0.0020156051873198846, 0.7812803103782735,
          ],
        ],
        [
          [0.7048061959654178, 0.009399117361784675],
          [
            0.6491592219020172, 0.12997090203685743, 0.4706909221902017,
            0.14322696411251212, 0.46437824207492795, 0.2928040737148399,
          ],
          [
            0.45494236311239195, 0.5008467507274491, 0.3815489913544669,
            0.42993404461687684, 0.30812391930835736, 0.5395596508244422,
          ],
          [
            0.22729682997118156, 0.6575926285160039, 0.32444452449567723,
            0.7088128031037827, 0.10236383285302593, 0.7358089233753637,
          ],
          [
            0.06961829971181556, 0.7433375363724539, 0.0032454610951008645,
            0.7549718719689622, 0.014484654178674353, 0.7933811833171678,
          ],
        ],
        [
          [0.7220821325648416, 0.017828322017458778],
          [
            0.6695036023054755, 0.13918525703200776, 0.4847564841498559,
            0.1482376333656644, 0.4796959654178674, 0.3014180407371484,
          ],
          [
            0.4716080691642651, 0.5094209505334626, 0.39148775216138326,
            0.4321280310378274, 0.3231671469740634, 0.5456556741028128,
          ],
          [
            0.24760806916426514, 0.665815712900097, 0.3305914985590778,
            0.7081193016488846, 0.11553746397694525, 0.747078564500485,
          ],
          [
            0.08378818443804034, 0.7592259941804074, 0.0157157060518732,
            0.7670727449078564, 0.02695489913544669, 0.8054820562560621,
          ],
        ],
        [
          [0.7393515850144092, 0.026257419980601358],
          [
            0.6898479827089338, 0.1483996120271581, 0.49882348703170026,
            0.15324927255092144, 0.49501512968299716, 0.31003200775945683,
          ],
          [
            0.48827449567723347, 0.5179951503394762, 0.40142723342939485,
            0.4343220174587779, 0.33821181556195967, 0.5517526673132881,
          ],
          [
            0.2679200288184438, 0.6740378273520854, 0.3367406340057637,
            0.7074267701260911, 0.12871181556195965, 0.7583482056256062,
          ],
          [
            0.09795893371757926, 0.7751144519883608, 0.028187103746397695,
            0.7791745877788554, 0.03942629682997118, 0.8175838991270611,
          ],
        ],
        [
          [0.756628242074928, 0.03468661493695441],
          [
            0.7101945244956772, 0.15761396702230843, 0.5128912103746398,
            0.15826091173617846, 0.5103350144092219, 0.31864597478176526,
          ],
          [
            0.5049423631123919, 0.5265693501454899, 0.41136815561959655,
            0.43651600387972844, 0.353257204610951, 0.5578496605237634,
          ],
          [
            0.28823342939481267, 0.6822609117361784, 0.34288976945244953,
            0.7067342386032978, 0.14188760806916426, 0.7696178467507274,
          ],
          [
            0.11213112391930836, 0.7910029097963143, 0.04065951008645533,
            0.7912754607177497, 0.051898703170028815, 0.8296847720659554,
          ],
        ],
        [
          [0.7739048991354467, 0.04311580989330747],
          [
            0.7305403458213257, 0.16682832201745879, 0.5269603746397695,
            0.16327158098933076, 0.525657060518732, 0.3272599418040737,
          ],
          [
            0.5216116714697406, 0.5351435499515034, 0.4213097982708934,
            0.438709990300679, 0.3683047550432277, 0.5639466537342386,
          ],
          [
            0.3085482708933717, 0.6904839961202716, 0.34904106628242076,
            0.7060417070805043, 0.15506556195965418, 0.7808874878758487,
          ],
          [
            0.12630403458213257, 0.8068913676042677, 0.05313364553314121,
            0.803376333656644, 0.06437283861671471, 0.8417856450048496,
          ],
        ],
        [
          [0.7911815561959655, 0.05154490785645005],
          [
            0.750893371757925, 0.17604267701260912, 0.5410302593659942,
            0.16828322017458777, 0.540978386167147, 0.33587390882638213,
          ],
          [
            0.5382809798270893, 0.543717749757517, 0.4312528818443804,
            0.44090300678952477, 0.3833515850144092, 0.5700426770126091,
          ],
          [
            0.32886383285302595, 0.6987070805043647, 0.355193083573487,
            0.7053482056256063, 0.168242795389049, 0.79215712900097,
          ],
          [
            0.14047838616714697, 0.822779825412221, 0.06560799711815563,
            0.8154772065955382, 0.07684726224783862, 0.8538865179437439,
          ],
        ],
        [
          [0.8084654178674352, 0.059974199806013574],
          [
            0.7712391930835735, 0.18525703200775945, 0.5551008645533141,
            0.17329485935984482, 0.5563018731988473, 0.34448787584869056,
          ],
          [
            0.5549517291066283, 0.5522929194956353, 0.44119596541786743,
            0.4430969932104753, 0.398399855907781, 0.5761396702230844,
          ],
          [
            0.3491801152737752, 0.7069301648884578, 0.36134510086455335,
            0.7046556741028128, 0.181421469740634, 0.8034267701260911,
          ],
          [
            0.15465273775216137, 0.8386682832201746, 0.0780835734870317,
            0.8275780795344325, 0.08932276657060519, 0.8659873908826382,
          ],
        ],
        [
          [0.8257420749279539, 0.06840329776915616],
          [
            0.791592219020173, 0.1944713870029098, 0.569172190201729,
            0.1783055286129971, 0.5716253602305476, 0.35310184287099905,
          ],
          [
            0.5716231988472622, 0.5608671193016489, 0.45114048991354466,
            0.44529097963142583, 0.41344956772334296, 0.5822366634335596,
          ],
          [
            0.36949639769452447, 0.7151522793404461, 0.3674985590778098,
            0.7039631425800194, 0.19460086455331413, 0.8146964112512124,
          ],
          [
            0.168828530259366, 0.8545567410281281, 0.09055907780979827,
            0.8396799224054317, 0.10179827089337175, 0.8780892337536372,
          ],
        ],
        [
          [0.8430187319884725, 0.07683249272550921],
          [
            0.8119380403458214, 0.20368574199806014, 0.5832442363112392,
            0.18331716779825413, 0.586949567723343, 0.3617158098933074,
          ],
          [
            0.5882946685878963, 0.5694413191076625, 0.4610850144092219,
            0.44748496605237637, 0.4284992795389049, 0.5883326867119302,
          ],
          [
            0.38981484149855905, 0.7233753637245393, 0.3736527377521614,
            0.7032696411251212, 0.20778097982708932, 0.8259660523763337,
          ],
          [
            0.1830050432276657, 0.8704451988360814, 0.10303602305475505,
            0.8517807953443259, 0.11427521613832853, 0.8901901066925315,
          ],
        ],
        [
          [0.8603025936599423, 0.08526168768186226],
          [
            0.8322910662824208, 0.21290009699321047, 0.5973177233429395,
            0.18832880698351115, 0.6022752161383285, 0.3703297769156159,
          ],
          [
            0.6049675792507205, 0.578015518913676, 0.47103097982708936,
            0.4496789524733269, 0.443549711815562, 0.5944296799224054,
          ],
          [
            0.41013328530259363, 0.7315984481086324, 0.37980763688760805,
            0.7025771096023278, 0.22096253602305477, 0.837235693501455,
          ],
          [
            0.19718227665706053, 0.8863336566440349, 0.11551368876080692,
            0.8638816682832202, 0.1267528818443804, 0.9022909796314258,
          ],
        ],
        [
          [0.877586455331412, 0.09369078564500485],
          [
            0.8526440922190202, 0.22211445198836083, 0.6113912103746397,
            0.19333947623666342, 0.6176008645533141, 0.3789427740058196,
          ],
          [
            0.6216412103746397, 0.5865897187196896, 0.4809776657060519,
            0.4518729388942774, 0.45860158501440923, 0.6005266731328808,
          ],
          [
            0.4304524495677233, 0.7398215324927255, 0.38596325648414986,
            0.7018845780795344, 0.2341440922190202, 0.8485053346265761,
          ],
          [
            0.21135951008645534, 0.9022211445198837, 0.1279920749279539,
            0.8759825412221145, 0.13923126801152735, 0.9143918525703202,
          ],
        ],
        [
          [0.8948703170028818, 0.10212027158098934],
          [
            0.8729971181556196, 0.23132880698351116, 0.6254661383285303,
            0.19835111542192047, 0.63292795389049, 0.38755674102812804,
          ],
          [
            0.6383162824207492, 0.5951639185257033, 0.4909257925072046,
            0.4540669253152279, 0.4736541786743516, 0.606623666343356,
          ],
          [
            0.45077305475504326, 0.7480436469447138, 0.39212031700288186,
            0.701192046556741, 0.24732708933717582, 0.8597759456838021,
          ],
          [
            0.22553890489913545, 0.9181096023278371, 0.14047190201729107,
            0.8880834141610088, 0.15171109510086456, 0.9264927255092144,
          ],
        ],
        [
          [0.9121469740634005, 0.11054898157129],
          [
            0.893350144092219, 0.2405431619786615, 0.6395403458213257,
            0.2033627546071775, 0.6482550432276657, 0.39617070805043647,
          ],
          [
            0.6549906340057636, 0.6037381183317168, 0.5008724783861671,
            0.45626091173617844, 0.4887060518731988, 0.6127196896217265,
          ],
          [
            0.47109293948126796, 0.756266731328807, 0.3982759365994236,
            0.700498545101843, 0.2605093659942363, 0.8710455868089234,
          ],
          [
            0.23971757925072046, 0.9339980601357905, 0.15295100864553313,
            0.9001842870999031, 0.16419020172910662, 0.9385935984481086,
          ],
        ],
        [
          [0.9294308357348703, 0.11897866149369545],
          [
            0.9137031700288185, 0.24975751697381182, 0.6536167146974063,
            0.20837342386032978, 0.6635835734870317, 0.40478467507274496,
          ],
          [
            0.6716664265129683, 0.6123123181377303, 0.5108220461095101,
            0.458454898157129, 0.5037600864553314, 0.6188166828322017,
          ],
          [
            0.49141426512968295, 0.7644898157129001, 0.40443443804034584,
            0.6998060135790495, 0.27369380403458216, 0.8823152279340446,
          ],
          [
            0.2538976945244957, 0.9498865179437439, 0.16543155619596542,
            0.9122861299709021, 0.1766707492795389, 0.9506954413191077,
          ],
        ],
        [
          [0.9467146974063401, 0.1274073714839961],
          [
            0.9340561959654179, 0.25897187196896215, 0.6676930835734871,
            0.2133850630455868, 0.6789113832853025, 0.41339864209505334,
          ],
          [
            0.688342939481268, 0.6208865179437439, 0.520770893371758,
            0.4606488845780795, 0.518814121037464, 0.624913676042677,
          ],
          [
            0.511736311239193, 0.7727129000969932, 0.41059221902017295,
            0.699113482056256, 0.28687752161383284, 0.8935848690591658,
          ],
          [
            0.268078530259366, 0.9657749757516975, 0.1779128242074928,
            0.9243870029097964, 0.1891520172910663, 0.9627963142580019,
          ],
        ],
        [
          [0.9639985590778097, 0.13583705140640157],
          [
            0.9544092219020173, 0.26818622696411254, 0.6817701729106629,
            0.21839670223084384, 0.6942406340057636, 0.4220126091173618,
          ],
          [
            0.7050194524495678, 0.6294616876818623, 0.5307204610951008,
            0.4628419010669253, 0.5338688760806917, 0.6310096993210476,
          ],
          [
            0.5320583573487031, 0.7809359844810863, 0.41675144092219024,
            0.6984199806013579, 0.3000626801152738, 0.9048545101842871,
          ],
          [
            0.28225936599423634, 0.9816682832201746, 0.19039409221902018,
            0.9364878758486906, 0.20163328530259367, 0.974898157129001,
          ],
        ],
        [
          [0.9812896253602306, 0.14426576139670222],
          [
            0.9747694524495677, 0.27740058195926287, 0.6958472622478387,
            0.22340737148399611, 0.7095698847262248, 0.4306265761396702,
          ],
          [
            0.721693083573487, 0.6380358874878759, 0.540670749279539,
            0.46503588748787583, 0.5489236311239193, 0.6371066925315227,
          ],
          [
            0.5523811239193084, 0.7891580989330746, 0.4229099423631124,
            0.6977274490785644, 0.3132478386167147, 0.9161241513094084,
          ],
          [
            0.2964402017291066, 0.9975557710960233, 0.20287608069164265,
            0.9485887487875849, 0.21411527377521614, 0.9870029097963143,
          ],
        ],
        [
          [0.9985734870317002, 0.15269544131910767],
          [
            0.9951224783861672, 0.2866149369544132, 0.7099250720461094,
            0.22841901066925316, 0.7248991354466858, 0.4392405431619787,
          ],
          [
            0.7383717579250719, 0.6466100872938894, 0.550621037463977,
            0.46722987390882637, 0.563979106628242, 0.643203685741998,
          ],
          [
            0.5727046109510087, 0.7973811833171678, 0.42906988472622476,
            0.6970349175557711, 0.3264337175792507, 0.9273937924345296,
          ],
          [
            0.31062247838616713, 1.0134432589718718, 0.21535878962536023,
            0.9606896217264792, 0.2265979827089337, 0.9990979631425799,
          ],
        ],
      ],
    },
    homeLeft: {
      lines: [
        [
          [0.9988465974625144, 0.6914715672676838],
          [
            0.9103794694348327, 0.4704674063800277, 0.803287197231834,
            0.6309292649098474, 0.7342906574394463, 0.429120665742025,
          ],
          [
            0.6652941176470588, 0.2273134535367545, 0.6640242214532871,
            0.14462135922330097, 0.5543921568627451, 0.13674590846047158,
          ],
          [
            0.4447612456747405, 0.12887045769764216, 0.41386043829296426,
            0.07423467406380028, 0.3884636678200692, 0.0013869625520110957,
          ],
        ],
        [
          [0.9836885813148788, 0.7060970873786407],
          [
            0.8882468281430219, 0.4797725381414702, 0.7820622837370242,
            0.6432815533980583, 0.7127635524798155, 0.4423869625520111,
          ],
          [
            0.6434648212226067, 0.24149375866851594, 0.6460657439446367,
            0.15875450762829404, 0.5352237600922722, 0.14865325936199722,
          ],
          [
            0.42438292964244523, 0.1385506241331484, 0.3950542099192618,
            0.08349292649098475, 0.37001960784313725, 0.01141873786407767,
          ],
        ],
        [
          [0.9685317185697808, 0.7207226074895977],
          [
            0.8661153402537486, 0.4890776699029126, 0.7608373702422145,
            0.655633841886269, 0.6912364475201845, 0.45565325936199724,
          ],
          [
            0.6216355247981545, 0.2556740638002774, 0.6281061130334487,
            0.17288904299583913, 0.5160553633217994, 0.16056033287101248,
          ],
          [
            0.40400461361014994, 0.14823023578363384, 0.3762491349480969,
            0.09275131761442441, 0.3515767012687428, 0.021450624133148403,
          ],
        ],
        [
          [0.9533725490196078, 0.7353481276005548],
          [
            0.8439826989619377, 0.49838280166435506, 0.7396113033448675,
            0.6679861303744798, 0.6697081891580161, 0.4689195561719834,
          ],
          [
            0.5998050749711649, 0.26985436893203885, 0.6101453287197232,
            0.18702219140083215, 0.49688581314878894, 0.17246601941747572,
          ],
          [
            0.3836251441753172, 0.1579112343966713, 0.35744175317185695,
            0.10200970873786408, 0.33313264129181086, 0.03148238557558946,
          ],
        ],
        [
          [0.9382156862745098, 0.7499750346740638],
          [
            0.8218512110726643, 0.5076879334257975, 0.7183863898500576,
            0.6803384188626908, 0.6481810841983852, 0.4821858529819695,
          ],
          [
            0.5779757785467128, 0.2840346740638003, 0.5921856978085351,
            0.20115533980582523, 0.47771626297577857, 0.18437309292649098,
          ],
          [
            0.3632468281430219, 0.1675908460471567, 0.3386355247981545,
            0.11126796116504854, 0.3146897347174164, 0.04151414701803051,
          ],
        ],
        [
          [0.9230576701268743, 0.7646005547850209],
          [
            0.799719723183391, 0.51699306518724, 0.6971626297577855,
            0.6926907073509015, 0.6266539792387543, 0.4954535367545076,
          ],
          [
            0.5561464821222606, 0.2982149791955617, 0.5742272202998847,
            0.2152898751733703, 0.45854786620530563, 0.19628016643550625,
          ],
          [
            0.34286851211072666, 0.1772718446601942, 0.3198304498269896,
            0.120526213592233, 0.29624682814302195, 0.051545908460471565,
          ],
        ],
        [
          [0.9078996539792388, 0.7792260748959778],
          [
            0.7775870818915802, 0.5262981969486824, 0.6759377162629758,
            0.7050429958391123, 0.6051268742791234, 0.5087198335644937,
          ],
          [
            0.5343171856978085, 0.3123966712898752, 0.5562675893886967,
            0.22942302357836336, 0.43937946943483275, 0.2081872399445215,
          ],
          [
            0.32249134948096886, 0.1869514563106796, 0.3010242214532872,
            0.12978460471567269, 0.27780392156862743, 0.06157780859916782,
          ],
        ],
        [
          [0.8927427912341408, 0.7938515950069348],
          [
            0.7554555940023068, 0.5356033287101248, 0.654712802768166,
            0.7173952843273231, 0.5835997693194925, 0.5219861303744798,
          ],
          [
            0.5124878892733564, 0.3265769764216366, 0.5383079584775087,
            0.24355617198335647, 0.4202099192618224, 0.22009431345353675,
          ],
          [
            0.30211303344867363, 0.19663245492371706, 0.2822179930795848,
            0.13904299583911234, 0.25936101499423303, 0.07160957004160888,
          ],
        ],
        [
          [0.8775836216839678, 0.8084771151178919],
          [
            0.7333229527104961, 0.5449084604715673, 0.6334867358708188,
            0.729746185852982, 0.5620715109573241, 0.535252427184466,
          ],
          [
            0.49065743944636675, 0.3407572815533981, 0.5203483275663207,
            0.2576893203883495, 0.401040369088812, 0.23200138696255201,
          ],
          [
            0.2817335640138408, 0.2063120665742025, 0.26341061130334487,
            0.1483009708737864, 0.24091580161476356, 0.08164133148404992,
          ],
        ],
        [
          [0.8624267589388697, 0.8231040221914008],
          [
            0.7111914648212225, 0.5542135922330097, 0.6122618223760092,
            0.7420984743411928, 0.5405444059976932, 0.5485187239944522,
          ],
          [
            0.4688281430219146, 0.3549375866851595, 0.5023886966551326,
            0.27182385575589463, 0.38187197231833914, 0.24390846047156728,
          ],
          [
            0.2613552479815456, 0.21599306518723993, 0.24460553633217993,
            0.15755894590846045, 0.22247289504036907, 0.09167309292649098,
          ],
        ],
        [
          [0.8472687427912341, 0.8377295423023579],
          [
            0.6890588235294117, 0.5635187239944521, 0.591038062283737,
            0.7544507628294035, 0.5190184544405998, 0.5617850208044383,
          ],
          [
            0.44699769319492505, 0.36911789181692095, 0.4844290657439446,
            0.28595700416088765, 0.3627035755478662, 0.25581553398058254,
          ],
          [
            0.24097693194925027, 0.2256726768377254, 0.2257993079584775,
            0.16681830790568655, 0.20402998846597464, 0.10170499306518724,
          ],
        ],
        [
          [0.8321107266435986, 0.8523550624133148],
          [
            0.6669273356401384, 0.5728238557558946, 0.5698131487889273,
            0.7668030513176144, 0.49749134948096885, 0.5750513176144244,
          ],
          [
            0.42516839677047286, 0.3832981969486824, 0.4664694348327566,
            0.30009015256588073, 0.34353402537485583, 0.2677212205270458,
          ],
          [
            0.220598615916955, 0.2353522884882108, 0.20699307958477509,
            0.1760762829403606, 0.18558708189158016, 0.11173661581137309,
          ],
        ],
        [
          [0.8169527104959631, 0.8669805825242718],
          [
            0.6447946943483276, 0.582128987517337, 0.5485870818915801,
            0.7791553398058252, 0.4759630911188005, 0.5883176144244106,
          ],
          [
            0.4033379469434833, 0.39747850208044383, 0.44850980392156864,
            0.31422468793342584, 0.3243644752018454, 0.27962829403606104,
          ],
          [
            0.20022029988465975, 0.24503328710124828, 0.18818685121107265,
            0.1853342579750347, 0.16714302191464822, 0.12176851595006935,
          ],
        ],
        [
          [0.8017946943483275, 0.8816061026352289],
          [
            0.6226632064590543, 0.5914341192787794, 0.5273621683967705,
            0.7915076282940361, 0.4544359861591695, 0.6015839112343967,
          ],
          [
            0.3815086505190311, 0.41165880721220527, 0.4305501730103806,
            0.32835783633841886, 0.3051960784313726, 0.2915353675450763,
          ],
          [
            0.17984198385236447, 0.2547128987517337, 0.16938062283737026,
            0.1945922330097087, 0.14870011534025376, 0.1318002773925104,
          ],
        ],
        [
          [0.7866378316032295, 0.8962330097087379],
          [
            0.6005317185697808, 0.6007392510402219, 0.5061372549019608,
            0.8038599167822469, 0.43290888119953863, 0.6148502080443828,
          ],
          [
            0.359679354094579, 0.42583911234396665, 0.4125905420991926,
            0.34249098474341194, 0.28602768166089965, 0.30344244105409157,
          ],
          [
            0.1594636678200692, 0.26439389736477115, 0.15057439446366783,
            0.2038515950069348, 0.1302560553633218, 0.14183217753120664,
          ],
        ],
        [
          [0.7714798154555941, 0.910858529819695],
          [
            0.57839907727797, 0.6100443828016643, 0.48491234140715106,
            0.8162122052704578, 0.41138177623990774, 0.628116504854369,
          ],
          [
            0.3378500576701269, 0.4400208044382802, 0.3946309111880046,
            0.356625520110957, 0.2668581314878893, 0.3153495145631068,
          ],
          [
            0.13908535178777393, 0.27407350901525657, 0.1317681660899654,
            0.21310957004160885, 0.11181349480968858, 0.15186407766990292,
          ],
        ],
        [
          [0.7563217993079585, 0.9254840499306519],
          [
            0.5562675893886967, 0.6193509015256589, 0.46368858131487883,
            0.8285644937586685, 0.38985467128027684, 0.6413828016643551,
          ],
          [
            0.31602076124567474, 0.45420110957004156, 0.3766724336793541,
            0.3707586685159501, 0.2476897347174164, 0.32725658807212205,
          ],
          [
            0.11870703575547865, 0.283754507628294, 0.11296274509803922,
            0.22236754507628292, 0.09337047289504037, 0.16189597780859918,
          ],
        ],
        [
          [0.741163783160323, 0.9401095700416088],
          [
            0.5341349480968859, 0.6286560332871013, 0.4424625144175317,
            0.8409167822468794, 0.3683264129181084, 0.6546490984743412,
          ],
          [
            0.2941903114186851, 0.468381414701803, 0.3587116493656286,
            0.38489181692094315, 0.228520184544406, 0.3391636615811373,
          ],
          [
            0.09832814302191466, 0.2934341192787795, 0.09415570934256055,
            0.23162552011095702, 0.07492629757785467, 0.17192787794729542,
          ],
        ],
        [
          [0.7260057670126875, 0.954735090152566],
          [
            0.5120034602076124, 0.6379611650485437, 0.42123760092272206,
            0.8532690707350902, 0.3467993079584775, 0.6679153952843273,
          ],
          [
            0.272361014994233, 0.4825617198335645, 0.34075201845444064,
            0.3990263522884882, 0.20935063437139562, 0.35106934812760054,
          ],
          [
            0.07794994232987312, 0.3031137309292649, 0.07534982698961938,
            0.24088488210818307, 0.05648316032295271, 0.1819597780859917,
          ],
        ],
        [
          [0.7108489042675894, 0.9693619972260749],
          [
            0.48987081891580164, 0.647266296809986, 0.4000126874279123,
            0.8656213592233011, 0.3252722029988466, 0.6811816920943135,
          ],
          [
            0.25053171856978085, 0.49674202496532593, 0.32279238754325257,
            0.41315950069348123, 0.19018223760092273, 0.3629764216366158,
          ],
          [
            0.05757185697808535, 0.31279472954230236, 0.05654382929642445,
            0.25014285714285717, 0.03804002306805075, 0.1919916782246879,
          ],
        ],
        [
          [0.6956908881199538, 0.9839875173370319],
          [
            0.4677393310265282, 0.6565714285714286, 0.37878777393310264,
            0.8779736477115118, 0.3037450980392157, 0.6944479889042996,
          ],
          [
            0.2287024221453287, 0.5109223300970874, 0.3048339100346021,
            0.4272926490984743, 0.17101384083044982, 0.3748834951456311,
          ],
          [
            0.037193656286043826, 0.3224743411927878, 0.03773794694348328,
            0.2594008321775312, 0.019597001153402537, 0.20202219140083216,
          ],
        ],
        [
          [0.6805328719723184, 0.9986130374479889],
          [
            0.4456078431372549, 0.665876560332871, 0.3575640138408304,
            0.8903259361997226, 0.2822179930795848, 0.7077142857142857,
          ],
          [
            0.2068731257208766, 0.5251026352288488, 0.28687427912341407,
            0.4414271844660194, 0.15184544405997694, 0.3867905686546463,
          ],
          [
            0.016815686274509804, 0.33215533980582523, 0.0189320645905421,
            0.26865880721220525, 0.0011539215686274511, 0.21205409153952842,
          ],
        ],
      ],
    },
  };

  type WaveKey = keyof typeof waveLines;

  function getDashLength(ctx: CanvasRenderingContext2D) {
    const { width, height } = ctx.canvas;
    return Math.sqrt(width * width + height * height);
  }

  function setupCanvas(canvas: HTMLCanvasElement) {
    const ctx = canvas.getContext("2d");

    return ctx;
  }

  function scaleSegment(ctx: CanvasRenderingContext2D, coords: number[]) {
    const { width, height } = ctx.canvas;
    return coords.map((num, i) => {
      let out = num;
      if (i % 2 === 0) {
        out *= width;
      } else {
        out *= height;
      }
      return out;
    });
  }

  function setBgCtxOption(ctx: CanvasRenderingContext2D) {
    ctx.setLineDash([getDashLength(ctx)]);
    ctx.lineWidth = 1.5;
    ctx.strokeStyle = "#334155";
    ctx.lineDashOffset = 0;
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
  }

  function setFgCtxOptions(ctx: CanvasRenderingContext2D) {
    ctx.setLineDash([0, getDashLength(ctx)]);
    ctx.lineWidth = 1.5;
    ctx.strokeStyle = "#60a5fa";
    ctx.lineDashOffset = 0;
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
  }

  function generateLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    waveType: WaveKey,
  ) {
    paths.splice(0, paths.length);
    waveLines[waveType].lines.forEach((line) => {
      const path = new Path2D();

      line.forEach((lineSegment) => {
        if (lineSegment.length === 2) {
          path.moveTo(...(scaleSegment(ctx, lineSegment) as [number, number]));
        } else if (lineSegment.length === 6) {
          path.bezierCurveTo(
            ...(scaleSegment(ctx, lineSegment) as [
              number,
              number,
              number,
              number,
              number,
              number,
            ]),
          );
        }
      });

      paths.push(path);
    });
  }

  function drawLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    rgb: [number, number, number],
  ) {
    const { width, height } = ctx.canvas;
    ctx.clearRect(0, 0, width, height);
    paths.forEach((path, i) => {
      ctx.strokeStyle = `rgb(${rgb},${Math.min(1, i / 16)})`;
      ctx.stroke(path);
    });
  }

  function animateFgLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    i = 0,
  ) {
    i += getDashLength(ctx) / 180;
    const dashLength = getDashLength(ctx);

    ctx.lineDashOffset = dashLength - i;
    ctx.setLineDash([
      (dashLength / 5) * (i / dashLength),
      dashLength - (dashLength / 10) * (i / dashLength),
    ]);

    requestAnimationFrame(() => drawLines(ctx, paths, [96, 165, 250]));

    if (i >= dashLength) {
      i = 0;
    }

    requestAnimationFrame(() => animateFgLines(ctx, paths, i));
  }

  function animateBgLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    startFgAnimation: Function,
    fgDelay: number,
    i = 0,
  ) {
    i += getDashLength(ctx) / 180;
    const dashLength = getDashLength(ctx);

    ctx.lineDashOffset = dashLength - i;

    requestAnimationFrame(() => drawLines(ctx, paths, [51, 65, 85]));

    if (i >= dashLength) {
      setTimeout(() => startFgAnimation(), fgDelay);
      return;
    }

    requestAnimationFrame(() =>
      animateBgLines(ctx, paths, startFgAnimation, fgDelay, i),
    );
  }

  function generateAllLines(
    bgCtx: CanvasRenderingContext2D,
    fgCtx: CanvasRenderingContext2D,
    bgPaths: Path2D[],
    fgPaths: Path2D[],
    waveType: WaveKey,
  ) {
    generateLines(bgCtx, bgPaths, waveType);
    generateLines(fgCtx, fgPaths, waveType);
  }

  function renderBgLines(ctx: CanvasRenderingContext2D, paths: Path2D[]) {
    requestAnimationFrame(() => setBgCtxOption(ctx));
    requestAnimationFrame(() => drawLines(ctx, paths, [51, 65, 85]));
  }

  function renderFgLines(ctx: CanvasRenderingContext2D, paths: Path2D[]) {
    requestAnimationFrame(() => setFgCtxOptions(ctx));
    requestAnimationFrame(() => drawLines(ctx, paths, [96, 165, 250]));
  }

  function attachWaveAnimation(
    bgCanvas: HTMLCanvasElement,
    fgCanvas: HTMLCanvasElement,
    waveType: WaveKey,
    fgDelay: number,
  ) {
    const bgPaths: Path2D[] = [];
    const fgPaths: Path2D[] = [];

    const { width, height } = bgCanvas.getBoundingClientRect();

    const bgCtx = setupCanvas(bgCanvas);
    const fgCtx = setupCanvas(fgCanvas);

    if (!bgCtx || !fgCtx) {
      console.log("ctx init err");
      return;
    }

    bgCtx.canvas.width = width;
    bgCtx.canvas.height = height;
    fgCtx.canvas.width = width;
    fgCtx.canvas.height = height;

    generateAllLines(bgCtx, fgCtx, bgPaths, fgPaths, waveType);

    renderBgLines(bgCtx, bgPaths);
    // renderFgLines(fgCtx, fgPaths);
    requestAnimationFrame(() =>
      animateBgLines(bgCtx, bgPaths, startFgAnimation, fgDelay),
    );

    const startFgAnimation = () => {
      renderFgLines(fgCtx, fgPaths);
      requestAnimationFrame(() => animateFgLines(fgCtx, fgPaths));
    };

    window.addEventListener("resize", () => {
      const { width, height } = bgCanvas.getBoundingClientRect();

      bgCtx.canvas.width = width;
      bgCtx.canvas.height = height;
      fgCtx.canvas.width = width;
      fgCtx.canvas.height = height;

      generateAllLines(bgCtx, fgCtx, bgPaths, fgPaths, waveType);

      renderBgLines(bgCtx, bgPaths);
      renderFgLines(fgCtx, fgPaths);
    });
  }

  const canvasContainers = document.querySelectorAll(
    "[wave-canvas-container]",
  ) as NodeListOf<HTMLCanvasElement>;

  canvasContainers.forEach((canvasContainer) => {
    const bgCanvas = canvasContainer.children[0] as HTMLCanvasElement;
    const fgCanvas = canvasContainer.children[1] as HTMLCanvasElement;
    const waveType = canvasContainer.getAttribute("wave-type") as WaveKey;
    const fgDelay = +(canvasContainer.getAttribute("fg-delay") as string);

    attachWaveAnimation(bgCanvas, fgCanvas, waveType, fgDelay);
  });
</script>
