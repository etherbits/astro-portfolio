---
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"svg"> {
  type: "homeRight" | "homeLeft";
}

const { props } = Astro;
---

<canvas canvas-bg wave-type={props.type} {...props}></canvas>
<canvas canvas-fg wave-type={props.type} {...props}></canvas>

<script>
  const waveLines = {
    homeRight: {
      viewBox: "0 0 1460 1068",
      lines: [
        [
          [0.6875345821325648, 0.0009699321047526673],
          [
            0.6288170028818444, 0.12075654704170707, 0.45662680115273774,
            0.13821532492725508, 0.44906195965417867, 0.28419010669253153,
          ],
          [
            0.43827809798270895, 0.4922725509214355, 0.37161239193083573,
            0.4277400581959263, 0.2930821325648415, 0.533462657613967,
          ],
          [
            0.20698703170028818, 0.6493695441319107, 0.31829827089337176,
            0.7095053346265762, 0.08919164265129684, 0.7245392822502424,
          ],
          [
            0.055449783861671466, 0.7274490785645005, -0.0092235590778098,
            0.7428709990300679, 0.0020156051873198846, 0.7812803103782735,
          ],
        ],
        [
          [0.7048061959654178, 0.009399117361784675],
          [
            0.6491592219020172, 0.12997090203685743, 0.4706909221902017,
            0.14322696411251212, 0.46437824207492795, 0.2928040737148399,
          ],
          [
            0.45494236311239195, 0.5008467507274491, 0.3815489913544669,
            0.42993404461687684, 0.30812391930835736, 0.5395596508244422,
          ],
          [
            0.22729682997118156, 0.6575926285160039, 0.32444452449567723,
            0.7088128031037827, 0.10236383285302593, 0.7358089233753637,
          ],
          [
            0.06961829971181556, 0.7433375363724539, 0.0032454610951008645,
            0.7549718719689622, 0.014484654178674353, 0.7933811833171678,
          ],
        ],
        [
          [0.7220821325648416, 0.017828322017458778],
          [
            0.6695036023054755, 0.13918525703200776, 0.4847564841498559,
            0.1482376333656644, 0.4796959654178674, 0.3014180407371484,
          ],
          [
            0.4716080691642651, 0.5094209505334626, 0.39148775216138326,
            0.4321280310378274, 0.3231671469740634, 0.5456556741028128,
          ],
          [
            0.24760806916426514, 0.665815712900097, 0.3305914985590778,
            0.7081193016488846, 0.11553746397694525, 0.747078564500485,
          ],
          [
            0.08378818443804034, 0.7592259941804074, 0.0157157060518732,
            0.7670727449078564, 0.02695489913544669, 0.8054820562560621,
          ],
        ],
        [
          [0.7393515850144092, 0.026257419980601358],
          [
            0.6898479827089338, 0.1483996120271581, 0.49882348703170026,
            0.15324927255092144, 0.49501512968299716, 0.31003200775945683,
          ],
          [
            0.48827449567723347, 0.5179951503394762, 0.40142723342939485,
            0.4343220174587779, 0.33821181556195967, 0.5517526673132881,
          ],
          [
            0.2679200288184438, 0.6740378273520854, 0.3367406340057637,
            0.7074267701260911, 0.12871181556195965, 0.7583482056256062,
          ],
          [
            0.09795893371757926, 0.7751144519883608, 0.028187103746397695,
            0.7791745877788554, 0.03942629682997118, 0.8175838991270611,
          ],
        ],
        [
          [0.756628242074928, 0.03468661493695441],
          [
            0.7101945244956772, 0.15761396702230843, 0.5128912103746398,
            0.15826091173617846, 0.5103350144092219, 0.31864597478176526,
          ],
          [
            0.5049423631123919, 0.5265693501454899, 0.41136815561959655,
            0.43651600387972844, 0.353257204610951, 0.5578496605237634,
          ],
          [
            0.28823342939481267, 0.6822609117361784, 0.34288976945244953,
            0.7067342386032978, 0.14188760806916426, 0.7696178467507274,
          ],
          [
            0.11213112391930836, 0.7910029097963143, 0.04065951008645533,
            0.7912754607177497, 0.051898703170028815, 0.8296847720659554,
          ],
        ],
        [
          [0.7739048991354467, 0.04311580989330747],
          [
            0.7305403458213257, 0.16682832201745879, 0.5269603746397695,
            0.16327158098933076, 0.525657060518732, 0.3272599418040737,
          ],
          [
            0.5216116714697406, 0.5351435499515034, 0.4213097982708934,
            0.438709990300679, 0.3683047550432277, 0.5639466537342386,
          ],
          [
            0.3085482708933717, 0.6904839961202716, 0.34904106628242076,
            0.7060417070805043, 0.15506556195965418, 0.7808874878758487,
          ],
          [
            0.12630403458213257, 0.8068913676042677, 0.05313364553314121,
            0.803376333656644, 0.06437283861671471, 0.8417856450048496,
          ],
        ],
        [
          [0.7911815561959655, 0.05154490785645005],
          [
            0.750893371757925, 0.17604267701260912, 0.5410302593659942,
            0.16828322017458777, 0.540978386167147, 0.33587390882638213,
          ],
          [
            0.5382809798270893, 0.543717749757517, 0.4312528818443804,
            0.44090300678952477, 0.3833515850144092, 0.5700426770126091,
          ],
          [
            0.32886383285302595, 0.6987070805043647, 0.355193083573487,
            0.7053482056256063, 0.168242795389049, 0.79215712900097,
          ],
          [
            0.14047838616714697, 0.822779825412221, 0.06560799711815563,
            0.8154772065955382, 0.07684726224783862, 0.8538865179437439,
          ],
        ],
        [
          [0.8084654178674352, 0.059974199806013574],
          [
            0.7712391930835735, 0.18525703200775945, 0.5551008645533141,
            0.17329485935984482, 0.5563018731988473, 0.34448787584869056,
          ],
          [
            0.5549517291066283, 0.5522929194956353, 0.44119596541786743,
            0.4430969932104753, 0.398399855907781, 0.5761396702230844,
          ],
          [
            0.3491801152737752, 0.7069301648884578, 0.36134510086455335,
            0.7046556741028128, 0.181421469740634, 0.8034267701260911,
          ],
          [
            0.15465273775216137, 0.8386682832201746, 0.0780835734870317,
            0.8275780795344325, 0.08932276657060519, 0.8659873908826382,
          ],
        ],
        [
          [0.8257420749279539, 0.06840329776915616],
          [
            0.791592219020173, 0.1944713870029098, 0.569172190201729,
            0.1783055286129971, 0.5716253602305476, 0.35310184287099905,
          ],
          [
            0.5716231988472622, 0.5608671193016489, 0.45114048991354466,
            0.44529097963142583, 0.41344956772334296, 0.5822366634335596,
          ],
          [
            0.36949639769452447, 0.7151522793404461, 0.3674985590778098,
            0.7039631425800194, 0.19460086455331413, 0.8146964112512124,
          ],
          [
            0.168828530259366, 0.8545567410281281, 0.09055907780979827,
            0.8396799224054317, 0.10179827089337175, 0.8780892337536372,
          ],
        ],
        [
          [0.8430187319884725, 0.07683249272550921],
          [
            0.8119380403458214, 0.20368574199806014, 0.5832442363112392,
            0.18331716779825413, 0.586949567723343, 0.3617158098933074,
          ],
          [
            0.5882946685878963, 0.5694413191076625, 0.4610850144092219,
            0.44748496605237637, 0.4284992795389049, 0.5883326867119302,
          ],
          [
            0.38981484149855905, 0.7233753637245393, 0.3736527377521614,
            0.7032696411251212, 0.20778097982708932, 0.8259660523763337,
          ],
          [
            0.1830050432276657, 0.8704451988360814, 0.10303602305475505,
            0.8517807953443259, 0.11427521613832853, 0.8901901066925315,
          ],
        ],
        [
          [0.8603025936599423, 0.08526168768186226],
          [
            0.8322910662824208, 0.21290009699321047, 0.5973177233429395,
            0.18832880698351115, 0.6022752161383285, 0.3703297769156159,
          ],
          [
            0.6049675792507205, 0.578015518913676, 0.47103097982708936,
            0.4496789524733269, 0.443549711815562, 0.5944296799224054,
          ],
          [
            0.41013328530259363, 0.7315984481086324, 0.37980763688760805,
            0.7025771096023278, 0.22096253602305477, 0.837235693501455,
          ],
          [
            0.19718227665706053, 0.8863336566440349, 0.11551368876080692,
            0.8638816682832202, 0.1267528818443804, 0.9022909796314258,
          ],
        ],
        [
          [0.877586455331412, 0.09369078564500485],
          [
            0.8526440922190202, 0.22211445198836083, 0.6113912103746397,
            0.19333947623666342, 0.6176008645533141, 0.3789427740058196,
          ],
          [
            0.6216412103746397, 0.5865897187196896, 0.4809776657060519,
            0.4518729388942774, 0.45860158501440923, 0.6005266731328808,
          ],
          [
            0.4304524495677233, 0.7398215324927255, 0.38596325648414986,
            0.7018845780795344, 0.2341440922190202, 0.8485053346265761,
          ],
          [
            0.21135951008645534, 0.9022211445198837, 0.1279920749279539,
            0.8759825412221145, 0.13923126801152735, 0.9143918525703202,
          ],
        ],
        [
          [0.8948703170028818, 0.10212027158098934],
          [
            0.8729971181556196, 0.23132880698351116, 0.6254661383285303,
            0.19835111542192047, 0.63292795389049, 0.38755674102812804,
          ],
          [
            0.6383162824207492, 0.5951639185257033, 0.4909257925072046,
            0.4540669253152279, 0.4736541786743516, 0.606623666343356,
          ],
          [
            0.45077305475504326, 0.7480436469447138, 0.39212031700288186,
            0.701192046556741, 0.24732708933717582, 0.8597759456838021,
          ],
          [
            0.22553890489913545, 0.9181096023278371, 0.14047190201729107,
            0.8880834141610088, 0.15171109510086456, 0.9264927255092144,
          ],
        ],
        [
          [0.9121469740634005, 0.11054898157129],
          [
            0.893350144092219, 0.2405431619786615, 0.6395403458213257,
            0.2033627546071775, 0.6482550432276657, 0.39617070805043647,
          ],
          [
            0.6549906340057636, 0.6037381183317168, 0.5008724783861671,
            0.45626091173617844, 0.4887060518731988, 0.6127196896217265,
          ],
          [
            0.47109293948126796, 0.756266731328807, 0.3982759365994236,
            0.700498545101843, 0.2605093659942363, 0.8710455868089234,
          ],
          [
            0.23971757925072046, 0.9339980601357905, 0.15295100864553313,
            0.9001842870999031, 0.16419020172910662, 0.9385935984481086,
          ],
        ],
        [
          [0.9294308357348703, 0.11897866149369545],
          [
            0.9137031700288185, 0.24975751697381182, 0.6536167146974063,
            0.20837342386032978, 0.6635835734870317, 0.40478467507274496,
          ],
          [
            0.6716664265129683, 0.6123123181377303, 0.5108220461095101,
            0.458454898157129, 0.5037600864553314, 0.6188166828322017,
          ],
          [
            0.49141426512968295, 0.7644898157129001, 0.40443443804034584,
            0.6998060135790495, 0.27369380403458216, 0.8823152279340446,
          ],
          [
            0.2538976945244957, 0.9498865179437439, 0.16543155619596542,
            0.9122861299709021, 0.1766707492795389, 0.9506954413191077,
          ],
        ],
        [
          [0.9467146974063401, 0.1274073714839961],
          [
            0.9340561959654179, 0.25897187196896215, 0.6676930835734871,
            0.2133850630455868, 0.6789113832853025, 0.41339864209505334,
          ],
          [
            0.688342939481268, 0.6208865179437439, 0.520770893371758,
            0.4606488845780795, 0.518814121037464, 0.624913676042677,
          ],
          [
            0.511736311239193, 0.7727129000969932, 0.41059221902017295,
            0.699113482056256, 0.28687752161383284, 0.8935848690591658,
          ],
          [
            0.268078530259366, 0.9657749757516975, 0.1779128242074928,
            0.9243870029097964, 0.1891520172910663, 0.9627963142580019,
          ],
        ],
        [
          [0.9639985590778097, 0.13583705140640157],
          [
            0.9544092219020173, 0.26818622696411254, 0.6817701729106629,
            0.21839670223084384, 0.6942406340057636, 0.4220126091173618,
          ],
          [
            0.7050194524495678, 0.6294616876818623, 0.5307204610951008,
            0.4628419010669253, 0.5338688760806917, 0.6310096993210476,
          ],
          [
            0.5320583573487031, 0.7809359844810863, 0.41675144092219024,
            0.6984199806013579, 0.3000626801152738, 0.9048545101842871,
          ],
          [
            0.28225936599423634, 0.9816682832201746, 0.19039409221902018,
            0.9364878758486906, 0.20163328530259367, 0.974898157129001,
          ],
        ],
        [
          [0.9812896253602306, 0.14426576139670222],
          [
            0.9747694524495677, 0.27740058195926287, 0.6958472622478387,
            0.22340737148399611, 0.7095698847262248, 0.4306265761396702,
          ],
          [
            0.721693083573487, 0.6380358874878759, 0.540670749279539,
            0.46503588748787583, 0.5489236311239193, 0.6371066925315227,
          ],
          [
            0.5523811239193084, 0.7891580989330746, 0.4229099423631124,
            0.6977274490785644, 0.3132478386167147, 0.9161241513094084,
          ],
          [
            0.2964402017291066, 0.9975557710960233, 0.20287608069164265,
            0.9485887487875849, 0.21411527377521614, 0.9870029097963143,
          ],
        ],
        [
          [0.9985734870317002, 0.15269544131910767],
          [
            0.9951224783861672, 0.2866149369544132, 0.7099250720461094,
            0.22841901066925316, 0.7248991354466858, 0.4392405431619787,
          ],
          [
            0.7383717579250719, 0.6466100872938894, 0.550621037463977,
            0.46722987390882637, 0.563979106628242, 0.643203685741998,
          ],
          [
            0.5727046109510087, 0.7973811833171678, 0.42906988472622476,
            0.6970349175557711, 0.3264337175792507, 0.9273937924345296,
          ],
          [
            0.31062247838616713, 1.0134432589718718, 0.21535878962536023,
            0.9606896217264792, 0.2265979827089337, 0.9990979631425799,
          ],
        ],
      ],
    },
    homeLeft: {
      lines: [
        [
          [0.6239193083573487, 0.48356062075654704],
          [
            0.5686592219020172, 0.329007759456838, 0.5017651296829971,
            0.44122211445198833, 0.4586671469740634, 0.30009311348205625,
          ],
          [
            0.41556916426512963, 0.1589650824442289, 0.4147759365994236,
            0.10113676042677013, 0.3462953890489914, 0.09562929194956353,
          ],
          [
            0.2778155619596542, 0.09012182347235694, 0.25851368876080694,
            0.05191387002909797, 0.242649855907781, 0.0009699321047526673,
          ],
        ],
        [
          [0.6144510086455331, 0.4937885548011639],
          [
            0.5548342939481268, 0.33551503394762366, 0.488507204610951,
            0.4498603297769156, 0.4452204610951009, 0.30937051406401556,
          ],
          [
            0.4019337175792507, 0.16888166828322015, 0.40355835734870316,
            0.11102036857419981, 0.33432204610951005, 0.10395635305528614,
          ],
          [
            0.2650864553314121, 0.0968913676042677, 0.2467665706051873,
            0.05838836081474297, 0.23112896253602308, 0.007985363724539283,
          ],
        ],
        [
          [0.6049834293948126, 0.5040164888457808],
          [
            0.5410100864553314, 0.3420223084384093, 0.4752492795389049,
            0.45849854510184285, 0.43177377521613836, 0.3186479146459748,
          ],
          [
            0.3882982708933717, 0.17879825412221145, 0.3923400576368876,
            0.12090494665373425, 0.32234870317002884, 0.11228322017458778,
          ],
          [
            0.25235734870317, 0.10366052376333657, 0.23502017291066285,
            0.06486294859359845, 0.21960878962536023, 0.015000872938894277,
          ],
        ],
        [
          [0.595514409221902, 0.5142444228903977],
          [
            0.5271851585014409, 0.34852958292919495, 0.46199063400576373,
            0.4671367604267701, 0.41832636887608066, 0.32792531522793406,
          ],
          [
            0.37466210374639763, 0.18871483996120272, 0.3811210374639769,
            0.13078855480116391, 0.31037463976945245, 0.12060911736178467,
          ],
          [
            0.23962752161383286, 0.11043064985451018, 0.2232723342939481,
            0.07133753637245394, 0.20808789625360233, 0.022016294859359842,
          ],
        ],
        [
          [0.5860468299711815, 0.5244733268671192],
          [
            0.5133609510086455, 0.3550368574199806, 0.4487327089337176,
            0.47577497575169736, 0.40487968299711813, 0.3372027158098933,
          ],
          [
            0.36102665706051873, 0.19863142580019397, 0.36990273775216137,
            0.14067216294859358, 0.29840057636887607, 0.1289359844810863,
          ],
          [
            0.22689841498559077, 0.11719980601357904, 0.2115252161383285,
            0.07781202715809893, 0.19656772334293948, 0.02903171677982541,
          ],
        ],
        [
          [0.576578530259366, 0.5347012609117362],
          [
            0.49953674351585015, 0.36154413191076623, 0.4354755043227666,
            0.4844131910766246, 0.3914329971181556, 0.3464810863239573,
          ],
          [
            0.34739121037463977, 0.20854801163918527, 0.35868515850144095,
            0.15055674102812802, 0.2864272334293948, 0.13726285160038798,
          ],
          [
            0.2141693083573487, 0.12396993210475267, 0.19977881844380405,
            0.08428651794374394, 0.18504755043227666, 0.03604713870029098,
          ],
        ],
        [
          [0.5671102305475504, 0.5449291949563531],
          [
            0.48571181556195964, 0.36805140640155193, 0.42221757925072045,
            0.49305140640155193, 0.3779863112391931, 0.35575848690591655,
          ],
          [
            0.3337557636887608, 0.21846556741028128, 0.34746685878962535,
            0.1604403491755577, 0.27445389048991353, 0.14558971871968962,
          ],
          [
            0.20144092219020174, 0.13073908826382152, 0.18803170028818444,
            0.09076110572259942, 0.17352737752161382, 0.04306265761396702,
          ],
        ],
        [
          [0.55764265129683, 0.5551571290009699],
          [
            0.4718876080691643, 0.37455868089233757, 0.4089596541786743,
            0.5016896217264791, 0.36453962536023055, 0.3650358874878758,
          ],
          [
            0.32012031700288185, 0.22838215324927255, 0.3362485590778098,
            0.1703239573229874, 0.2624798270893372, 0.15391658583899126,
          ],
          [
            0.18871181556195968, 0.13750921435499514, 0.17628458213256484,
            0.0972356935014549, 0.16200720461095103, 0.050078079534432586,
          ],
        ],
        [
          [0.5481736311239194, 0.5653850630455869],
          [
            0.4580626801152738, 0.3810659553831232, 0.3957010086455331,
            0.5103268671193016, 0.3510922190201729, 0.3743132880698351,
          ],
          [
            0.3064841498559078, 0.23829873908826382, 0.3250302593659942,
            0.18020756547041708, 0.2505057636887608, 0.16224345295829293,
          ],
          [
            0.17598198847262247, 0.14427837051406403, 0.16453674351585015,
            0.10370999030067896, 0.15048559077809798, 0.05709350145489816,
          ],
        ],
        [
          [0.5387060518731989, 0.5756139670223084],
          [
            0.44423847262247834, 0.38757322987390885, 0.38244308357348705,
            0.5189650824442289, 0.3376455331412104, 0.3835906886517944,
          ],
          [
            0.2928487031700288, 0.2482153249272551, 0.3138119596541787,
            0.19009214354995152, 0.23853242074927955, 0.17057032007759457,
          ],
          [
            0.16325288184438042, 0.15104849660523761, 0.15279034582132564,
            0.110184287099903, 0.13896541786743516, 0.06410892337536372,
          ],
        ],
        [
          [0.5292377521613832, 0.5858419010669254],
          [
            0.4304135446685879, 0.3940805043646945, 0.36918587896253596,
            0.5276032977691562, 0.3241995677233429, 0.39286808923375366,
          ],
          [
            0.2792125360230548, 0.25813191076624636, 0.3025936599423631,
            0.1999757516973812, 0.22655907780979828, 0.17889718719689623,
          ],
          [
            0.15052377521613833, 0.1578176527643065, 0.14104322766570604,
            0.1166595538312318, 0.12744524495677234, 0.07112444228903977,
          ],
        ],
        [
          [0.5197694524495677, 0.5960698351115422],
          [
            0.4165893371757925, 0.4005877788554801, 0.3559279538904899,
            0.5362415130940834, 0.3107528818443804, 0.4021454898157129,
          ],
          [
            0.2655770893371758, 0.26804849660523766, 0.29137536023054755,
            0.20985935984481088, 0.2145850144092219, 0.1872230843840931,
          ],
          [
            0.13779466858789624, 0.16458680892337535, 0.12929610951008644,
            0.12313385063045586, 0.11592507204610951, 0.07813976721629486,
          ],
        ],
        [
          [0.5103011527377521, 0.6062977691561591],
          [
            0.40276440922190204, 0.4070950533462657, 0.3426693083573487,
            0.5448797284190107, 0.2973054755043228, 0.41142289039767216,
          ],
          [
            0.25194092219020175, 0.2779650824442289, 0.280157060518732,
            0.2197439379243453, 0.2026109510086455, 0.19554995150339477,
          ],
          [
            0.12506556195965418, 0.171356935014549, 0.11754899135446685,
            0.12960814742967994, 0.10440417867435159, 0.0851552861299709,
          ],
        ],
        [
          [0.5008328530259366, 0.6165257032007759],
          [
            0.38894020172910665, 0.41360232783705136, 0.3294113832853026,
            0.5535179437439379, 0.2838587896253602, 0.42070029097963146,
          ],
          [
            0.23830547550432274, 0.28788166828322015, 0.2689387608069164,
            0.229627546071775, 0.19063760806916427, 0.2038768186226964,
          ],
          [
            0.11233645533141211, 0.17812609117361786, 0.10580187319884726,
            0.13608244422890398, 0.09288400576368876, 0.09217070805043648,
          ],
        ],
        [
          [0.4913652737752161, 0.6267546071774975],
          [
            0.3751159942363112, 0.420109602327837, 0.3161534582132565,
            0.5621561590688652, 0.2704121037463977, 0.4299776915615907,
          ],
          [
            0.2246700288184438, 0.2977982541222114, 0.2577204610951009,
            0.23951115421920466, 0.178664265129683, 0.21220368574199808,
          ],
          [
            0.09960734870317002, 0.18489621726479144, 0.09405475504322766,
            0.1425577109602328, 0.08136311239193084, 0.09918622696411251,
          ],
        ],
        [
          [0.4818969740634006, 0.6369825412221145],
          [
            0.36129106628242075, 0.4266168768186227, 0.30289553314121037,
            0.5707943743937924, 0.25696541786743515, 0.43925509214354996,
          ],
          [
            0.21103458213256485, 0.3077158098933075, 0.2465021613832853,
            0.2493957322987391, 0.16669020172910665, 0.2205305528612997,
          ],
          [
            0.08687824207492796, 0.19166537342386034, 0.08230763688760806,
            0.14903200775945682, 0.06984315561959654, 0.10620174587778855,
          ],
        ],
        [
          [0.47242867435158503, 0.6472104752667314],
          [
            0.34746685878962535, 0.4331251212415131, 0.28963832853025934,
            0.5794325897187197, 0.24351873198847263, 0.4485324927255092,
          ],
          [
            0.19739913544668589, 0.31763239573229873, 0.23528458213256484,
            0.2592793404461688, 0.15471685878962538, 0.22885741998060136,
          ],
          [
            0.07414913544668587, 0.19843549951503395, 0.07056102305475503,
            0.1555063045586809, 0.05832291066282421, 0.1132172647914646,
          ],
        ],
        [
          [0.46296037463976947, 0.6574384093113481],
          [
            0.3336419308357349, 0.4396323957322988, 0.2763796829971182,
            0.588070805043647, 0.23007132564841498, 0.45780989330746846,
          ],
          [
            0.1837629682997118, 0.32754898157129, 0.22406556195965416,
            0.26916294859359846, 0.142742795389049, 0.23718428709990302,
          ],
          [
            0.061419668587896256, 0.20520465567410281, 0.05881340057636887,
            0.16198060135790496, 0.046801945244956775, 0.12023278370514064,
          ],
        ],
        [
          [0.4534920749279539, 0.6676663433559651],
          [
            0.31981772334293945, 0.44613967022308443, 0.2631217579250721,
            0.5967090203685742, 0.21662463976945245, 0.46708729388942777,
          ],
          [
            0.17012752161383285, 0.3374655674102813, 0.21284726224783862,
            0.2790475266731329, 0.13076873198847264, 0.24551018428709992,
          ],
          [
            0.04869063400576369, 0.21197381183317165, 0.04706649855907781,
            0.16845586808923374, 0.035281628242074925, 0.1272483026188167,
          ],
        ],
        [
          [0.44402449567723346, 0.6778952473326867],
          [
            0.305992795389049, 0.45264694471387, 0.2498638328530259,
            0.6053472356935015, 0.20317795389048993, 0.476364694471387,
          ],
          [
            0.1564920749279539, 0.3473821532492726, 0.20162896253602305,
            0.28893113482056254, 0.11879538904899135, 0.25383705140640156,
          ],
          [
            0.035961671469740636, 0.2187439379243453, 0.03531952449567723,
            0.1749301648884578, 0.023761311239193082, 0.13426382153249272,
          ],
        ],
        [
          [0.43455619596541784, 0.6881231813773037],
          [
            0.2921685878962536, 0.45915421920465566, 0.2366059077809798,
            0.6139854510184287, 0.18973126801152737, 0.48564209505334627,
          ],
          [
            0.14285662824207493, 0.3572987390882638, 0.1904113832853026,
            0.2988147429679922, 0.10682204610951009, 0.2621639185257032,
          ],
          [
            0.023232636887608068, 0.22551309408341416, 0.02357262247838617,
            0.18140446168768184, 0.01224106628242075, 0.141278370514064,
          ],
        ],
        [
          [0.4250878962536023, 0.6983511154219205],
          [
            0.2783443804034582, 0.4656614936954413, 0.2233487031700288,
            0.622623666343356, 0.17628458213256484, 0.4949194956353055,
          ],
          [
            0.12922118155619597, 0.36721532492725506, 0.17919308357348704,
            0.3086993210475267, 0.09484870317002882, 0.27049078564500484,
          ],
          [
            0.010503746397694524, 0.2322832201745878, 0.011825720461095101,
            0.1878787584869059, 0.00072078530259366, 0.14829388942774005,
          ],
        ],
      ],
    },
  };

  type WaveKey = keyof typeof waveLines;

  const animStep = 10;
  let didResize = false;

  function getDashLength(ctx: CanvasRenderingContext2D) {
    const { width, height } = ctx.canvas;
    return Math.sqrt(width * width + height * height);
  }

  function setupCanvas(canvas: HTMLCanvasElement) {
    const ctx = canvas.getContext("2d");

    return ctx;
  }

  function scaleSegment(ctx: CanvasRenderingContext2D, coords: number[]) {
    const { width, height } = ctx.canvas;
    return coords.map((num, i) => {
      let out = num;
      if (i % 2 === 0) {
        out *= width;
      } else {
        out *= height;
      }
      return out;
    });
  }

  function setBgCtxOption(ctx: CanvasRenderingContext2D) {
    ctx.setLineDash([getDashLength(ctx)]);
    ctx.lineWidth = 1.5;
    ctx.strokeStyle = "#334155";
    ctx.lineDashOffset = 0;
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
  }

  function setFgCtxOptions(ctx: CanvasRenderingContext2D) {
    ctx.setLineDash([getDashLength(ctx) / 12, getDashLength(ctx)]);
    ctx.lineWidth = 1.5;
    ctx.strokeStyle = "#60a5fa";
    ctx.lineDashOffset = getDashLength(ctx);
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
  }

  function generateLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    waveType: WaveKey,
  ) {
    paths.splice(0, paths.length);
    waveLines[waveType].lines.forEach((line) => {
      const path = new Path2D();

      line.forEach((lineSegment) => {
        if (lineSegment.length === 2) {
          path.moveTo(...(scaleSegment(ctx, lineSegment) as [number, number]));
        } else if (lineSegment.length === 6) {
          path.bezierCurveTo(
            ...(scaleSegment(ctx, lineSegment) as [
              number,
              number,
              number,
              number,
              number,
              number,
            ]),
          );
        }
      });

      paths.push(path);
    });
  }

  function drawLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    rgb: [number, number, number],
  ) {
    const { width, height } = ctx.canvas;
    ctx.clearRect(0, 0, width, height);
    paths.forEach((path, i) => {
      ctx.strokeStyle = `rgb(${rgb},${Math.min(1, i / 16)})`;
      ctx.stroke(path);
    });
  }

  function animateFgLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    i = 0,
  ) {
    i += animStep;
    const dashLength = getDashLength(ctx);

    ctx.lineDashOffset = dashLength - i;

    requestAnimationFrame(() => drawLines(ctx, paths, [96, 165, 250]));

    if (i >= dashLength) {
      i = 0;
    }

    if (didResize) {
      didResize = false;
      return;
    }
    requestAnimationFrame(() => animateFgLines(ctx, paths, i));
  }

  function animateBgLines(
    ctx: CanvasRenderingContext2D,
    paths: Path2D[],
    i = 0,
  ) {
    i += animStep;
    const dashLength = getDashLength(ctx);

    ctx.lineDashOffset = dashLength - i;

    requestAnimationFrame(() => drawLines(ctx, paths, [51, 65, 85]));

    if (i >= dashLength) {
      startFgAction();
      return;
    }

    requestAnimationFrame(() => animateBgLines(ctx, paths, i));
  }

  function generateAllLines(
    bgCtx: CanvasRenderingContext2D,
    fgCtx: CanvasRenderingContext2D,
    bgPaths: Path2D[],
    fgPaths: Path2D[],
    waveType: WaveKey,
  ) {
    generateLines(bgCtx, bgPaths, waveType);
    generateLines(fgCtx, fgPaths, waveType);
  }

  function renderBgLines(ctx: CanvasRenderingContext2D, paths: Path2D[]) {
    requestAnimationFrame(() => setBgCtxOption(ctx));
    requestAnimationFrame(() => drawLines(ctx, paths, [51, 65, 85]));
  }

  function renderFgLines(ctx: CanvasRenderingContext2D, paths: Path2D[]) {
    requestAnimationFrame(() => setFgCtxOptions(ctx));
    requestAnimationFrame(() => drawLines(ctx, paths, [96, 165, 250]));
  }

  let startFgAction = () => {};

  function attachWaveAnimation() {
    const bgPaths: Path2D[] = [];
    const fgPaths: Path2D[] = [];

    const bgCanvas = document.querySelector("[canvas-bg]") as HTMLCanvasElement;

    const fgCanvas = document.querySelector("[canvas-fg]") as HTMLCanvasElement;
    const waveType = fgCanvas.getAttribute("wave-type") as WaveKey;

    const { width, height } = bgCanvas.getBoundingClientRect();

    const bgCtx = setupCanvas(bgCanvas);
    const fgCtx = setupCanvas(fgCanvas);

    if (!bgCtx || !fgCtx) {
      console.log("ctx init err");
      return;
    }

    bgCtx.canvas.width = width;
    bgCtx.canvas.height = height;
    fgCtx.canvas.width = width;
    fgCtx.canvas.height = height;

    generateAllLines(bgCtx, fgCtx, bgPaths, fgPaths, waveType);

    renderBgLines(bgCtx, bgPaths);
    requestAnimationFrame(() => animateBgLines(bgCtx, bgPaths));

    startFgAction = () => {
      renderFgLines(fgCtx, fgPaths);
      requestAnimationFrame(() => animateFgLines(fgCtx, fgPaths));
    };

    window.addEventListener("resize", () => {
      const { width, height } = bgCanvas.getBoundingClientRect();

      bgCtx.canvas.width = width;
      bgCtx.canvas.height = height;
      fgCtx.canvas.width = width;
      fgCtx.canvas.height = height;

      generateAllLines(bgCtx, fgCtx, bgPaths, fgPaths, waveType);

      renderBgLines(bgCtx, bgPaths);
      renderFgLines(fgCtx, fgPaths);
    });
  }

  attachWaveAnimation();
</script>
