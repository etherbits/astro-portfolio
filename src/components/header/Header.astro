---
import ResponsiveNavigation from "./ResponsiveNavigation.astro";
import LanguageToggle from "./LanguageToggle.astro";
import Link from "../Link.astro";
---

<header
  id="header"
  class="sticky top-0 z-[1] grid grid-cols-[1fr_1fr] items-center justify-between px-5 py-3 before:absolute before:z-[-1] before:h-full before:w-full before:bg-gradient-to-br before:from-[#000000bb] before:to-[#00000000] before:backdrop-blur-lg before:content-[''] md:grid-cols-[1fr_auto_1fr] md:px-10 md:py-6"
>
  <Link
    href="/"
    class="w-20% mr-6 w-fit whitespace-nowrap bg-gradient-to-br from-blue-200 to-slate-900 bg-clip-text text-center text-[24px] font-extrabold tracking-widest text-black"
    style={{ WebkitTextStroke: "2px transparent" }}
  >
    NQ
  </Link>
  <ResponsiveNavigation />

  <div class="ml-auto hidden md:block">
    <LanguageToggle />
  </div>
</header>

<script>
  function attachHeaderGutter() {
    if (window.innerWidth < 640) return;
    const header = document.querySelector("#header") as HTMLHeadingElement;
    const isBodyScrollable = document.body.scrollHeight > window.innerHeight;

    console.log(getComputedStyle(header).paddingRight);

    if (isBodyScrollable) {
      console.log("scrollable");
      return;
    }

    header.style.paddingRight =
      +getComputedStyle(header).paddingRight.replace("px", "") / 16 +
      0.75 +
      "rem";
    console.log(getComputedStyle(header).paddingRight);
  }

  attachHeaderGutter();
  document.addEventListener("astro:after-swap", attachHeaderGutter);
</script>
